#!/usr/bin/env python
import os
from bottle import post, run

@post("/")
def postHandler():
  from_ssid = [
    x for x in [
      x.strip() for x in os.popen("/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -I").read().split("\n")
    ] if x.startswith("SSID")
  ][0].split(" ")[1]

  if from_ssid=="SE-OPEN":
    to_ssid="SE"
  else:
    to_ssid="SE-OPEN"

  os.popen("/usr/sbin/networksetup -setairportnetwork en0 %s" % to_ssid)

  return "%s -> %s" % (from_ssid, to_ssid)

run(host='localhost', port=12345)